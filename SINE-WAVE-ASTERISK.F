DECIMAL
VARIABLE V1
VARIABLE V2

: INT1 4 / V1 +! V1 @ ; ( THIS IS THE FIRST INTEGRATOR, NOT INVERTED )
: INT2 4 / V2 +! V2 @ ; ( THIS IS THE SECOND INTEGRATOR, NOT INVERTED )
: INV 0 SWAP - ; ( INVERTER )
: FUNC INT1 INT2 INV ; ( THE WHOLE FUNCTION )
: DISP ( THIS DISPLAYS THE VALUE BY SPACING ALONG THE SCREEN BY THAT VALUE, SCALED AND PRINT AN ASTERISK )
     CR 40 + 0 DO SPACE LOOP 42 EMIT ;

: INIT 0 V1 ! 0 V2 ! 100 ;

: SINEWAVE
INIT
BEGIN
  FUNC ( GETS ITS VALUE FROM THE STACK, LEAVES ITS ANSWER ON THE STACK )
  DUP DISP ( PRINT THE * )
  ( THEN GO ROUND AGAIN, TAKING FUNCS OUTPUT BACK INTO FUNCS INPUT AGAIN. )
KEY?  UNTIL ( PRESS ESC TO END LOOP )
DROP CR ;

: HELP-SINE   ." DO --  RUN -- TO SEE SINEWAVE , ESC TO STOP " CR ;

CR  HELP-SINE

: RUN SINEWAVE ;